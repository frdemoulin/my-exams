# LibellÃ©s & terminologie (i18n)

L'application est **mono-langue (franÃ§ais)**. next-intl est conservÃ© pour centraliser
les libellÃ©s et traduire les termes techniques en vocabulaire mÃ©tier (ex: `Subject` â†’ "MatiÃ¨re").

## âœ… Positionnement

- **Pas de multilingue** : aucune bascule de langue, aucun sÃ©lecteur, pas de `/fr` en URL.
- La notion de **locale** reste **interne** : elle sert de dictionnaire mÃ©tier (FR).
- Si `/fr/*` ou `/en/*` est appelÃ©, on redirige vers la version sans prÃ©fixe.

## ğŸ“ Structure

```
src/
â”œâ”€â”€ i18n/
â”‚   â”œâ”€â”€ routing.ts              # Configuration des routes (fr uniquement)
â”‚   â”œâ”€â”€ request.ts              # Configuration pour le serveur
â”‚   â””â”€â”€ messages/
â”‚       â””â”€â”€ fr.json            # Traductions franÃ§aises
â”œâ”€â”€ proxy.ts                    # Proxy Next.js (remplace middleware)
â””â”€â”€ hooks/
    â””â”€â”€ use-translations.ts     # Hooks personnalisÃ©s
```

## ğŸŒ Locale supportÃ©e

- **FranÃ§ais (fr)** - Locale par dÃ©faut (seule locale)

## ğŸ¯ Utilisation dans les composants

### 1. Traductions des entitÃ©s mÃ©tier

```tsx
'use client';

import { useEntityTranslation } from '@/hooks/use-translations';

export function DiplomaPage() {
  const entity = useEntityTranslation('diploma');
  
  return (
    <div>
      <h1>{entity.plural}</h1>
      <button>{entity.actions.add}</button>
    </div>
  );
}
```

### 2. Traductions communes

```tsx
'use client';

import { useCommonTranslations } from '@/hooks/use-translations';

export function Form() {
  const common = useCommonTranslations();
  
  return (
    <div>
      <button>{common.save}</button>
      <button>{common.cancel}</button>
    </div>
  );
}
```

### 3. Messages de succÃ¨s/erreur

```tsx
'use client';

import { useMessageTranslations } from '@/hooks/use-translations';
import { toast } from 'react-hot-toast';

export function useDiplomaActions() {
  const messages = useMessageTranslations();
  
  const createDiploma = async (data: any) => {
    try {
      // ... logique de crÃ©ation
      toast.success(messages.success.created('DiplÃ´me'));
    } catch (error) {
      toast.error(messages.error.generic);
    }
  };
  
  return { createDiploma };
}
```

### 4. Traduction directe avec next-intl

```tsx
'use client';

import { useTranslations } from 'next-intl';

export function CustomComponent() {
  const t = useTranslations('common');
  
  return <button>{t('save')}</button>;
}
```

### 5. CÃ´tÃ© serveur

```tsx
import { getTranslations } from 'next-intl/server';

export default async function ServerPage() {
  const t = await getTranslations('common');
  
  return <h1>{t('welcome')}</h1>;
}
```

## ğŸ“ Ajouter de nouveaux libellÃ©s

### 1. Ajoutez les clÃ©s dans le fichier JSON

**src/i18n/messages/fr.json**
```json
{
  "myNewSection": {
    "title": "Mon titre",
    "description": "Ma description"
  }
}
```

### 2. Utilisez-les dans vos composants

```tsx
import { useTranslations } from 'next-intl';

export function MyComponent() {
  const t = useTranslations('myNewSection');
  
  return (
    <div>
      <h1>{t('title')}</h1>
      <p>{t('description')}</p>
    </div>
  );
}
```

## ğŸ¨ EntitÃ©s disponibles

Les entitÃ©s suivantes sont traduites dans `entities.*` :

- `curriculum` - Programme
- `diploma` - DiplÃ´me
- `division` - FiliÃ¨re
- `domain` - Domaine
- `examPaper` - Sujet d'examen
- `examinationCenter` - Centre d'examen
- `exercise` - Exercice
- `grade` - Niveau scolaire
- `subject` - MatiÃ¨re
- `teaching` - Enseignement
- `theme` - ThÃ¨me
- `user` - Utilisateur

Chaque entitÃ© a :
- `singular` / `plural`
- `article.definite` / `article.indefinite`
- `actions.add` / `actions.edit` / `actions.delete` / `actions.view` / `actions.list`

## ğŸ” URLs

Les URLs ne portent pas de prÃ©fixe de locale (franÃ§ais par dÃ©faut). Les routes `/fr/*` et `/en/*`
redirigent vers la version sans prÃ©fixe.

## ğŸš€ Bonnes pratiques

1. **Toujours utiliser les hooks** plutÃ´t que d'accÃ©der directement aux messages
2. **Grouper les traductions** par contexte (common, auth, navigation, etc.)
3. **Ã‰viter les hardcoded strings** dans l'UI - toujours passer par i18n
4. **Utiliser des clÃ©s descriptives** plutÃ´t que des raccourcis

## ğŸ› ï¸ Configuration technique

### Proxy (Next 16)

Le proxy intercepte toutes les requÃªtes et gÃ¨re automatiquement :
- DÃ©tection de la locale (fr)
- Redirection vers la version sans prÃ©fixe

> Ne pas crÃ©er `src/middleware.ts` : Next 16 utilise `proxy.ts` et refuse les deux fichiers.

### next.config.mjs

Le plugin next-intl est configurÃ© pour charger les messages au build :

```js
import createNextIntlPlugin from 'next-intl/plugin';
const withNextIntl = createNextIntlPlugin('./src/i18n/request.ts');

export default withNextIntl(nextConfig);
```

## ğŸ“š Ressources

- [Documentation next-intl](https://next-intl-docs.vercel.app/)
- [Next.js i18n routing](https://nextjs.org/docs/app/building-your-application/routing/internationalization)
