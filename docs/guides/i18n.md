# Configuration i18n avec next-intl

Ce document explique comment utiliser le systÃ¨me d'internationalisation (i18n) mis en place avec next-intl dans le projet.

## ğŸ“ Structure

```
src/
â”œâ”€â”€ i18n/
â”‚   â”œâ”€â”€ routing.ts              # Configuration des routes et locales
â”‚   â”œâ”€â”€ request.ts              # Configuration pour le serveur
â”‚   â”œâ”€â”€ config.ts               # Configuration globale
â”‚   â”œâ”€â”€ middleware-config.ts    # Config pour le middleware
â”‚   â””â”€â”€ messages/
â”‚       â”œâ”€â”€ fr.json            # Traductions franÃ§aises
â”‚       â””â”€â”€ en.json            # Traductions anglaises
â”œâ”€â”€ middleware.ts               # Middleware Next.js pour i18n
â””â”€â”€ hooks/
    â””â”€â”€ use-translations.ts     # Hooks personnalisÃ©s
```

## ğŸŒ Locales supportÃ©es

- **FranÃ§ais (fr)** - Locale par dÃ©faut
- **Anglais (en)**

## ğŸ¯ Utilisation dans les composants

### 1. Traductions des entitÃ©s mÃ©tier

```tsx
'use client';

import { useEntityTranslation } from '@/hooks/use-translations';

export function DiplomaPage() {
  const entity = useEntityTranslation('diploma');
  
  return (
    <div>
      <h1>{entity.plural}</h1>
      <button>{entity.actions.add}</button>
    </div>
  );
}
```

### 2. Traductions communes

```tsx
'use client';

import { useCommonTranslations } from '@/hooks/use-translations';

export function Form() {
  const common = useCommonTranslations();
  
  return (
    <div>
      <button>{common.save}</button>
      <button>{common.cancel}</button>
    </div>
  );
}
```

### 3. Messages de succÃ¨s/erreur

```tsx
'use client';

import { useMessageTranslations } from '@/hooks/use-translations';
import { toast } from 'react-hot-toast';

export function useDiplomaActions() {
  const messages = useMessageTranslations();
  
  const createDiploma = async (data: any) => {
    try {
      // ... logique de crÃ©ation
      toast.success(messages.success.created('DiplÃ´me'));
    } catch (error) {
      toast.error(messages.error.generic);
    }
  };
  
  return { createDiploma };
}
```

### 4. Traduction directe avec next-intl

```tsx
'use client';

import { useTranslations } from 'next-intl';

export function CustomComponent() {
  const t = useTranslations('common');
  
  return <button>{t('save')}</button>;
}
```

### 5. CÃ´tÃ© serveur

```tsx
import { getTranslations } from 'next-intl/server';

export default async function ServerPage() {
  const t = await getTranslations('common');
  
  return <h1>{t('welcome')}</h1>;
}
```

## ğŸ”„ Changement de langue

Le composant `LocaleSwitcher` permet de changer de langue :

```tsx
import { LocaleSwitcher } from '@/components/shared/locale-switcher';

export function Navbar() {
  return (
    <nav>
      {/* ... autres Ã©lÃ©ments */}
      <LocaleSwitcher />
    </nav>
  );
}
```

## ğŸ”— Navigation avec i18n

Utilisez les utilitaires de routing de next-intl au lieu de ceux de Next.js :

```tsx
// âŒ N'utilisez pas
import Link from 'next/link';
import { useRouter } from 'next/navigation';

// âœ… Utilisez plutÃ´t
import { Link, useRouter } from '@/i18n/routing';

export function Navigation() {
  const router = useRouter();
  
  return (
    <div>
      <Link href="/dashboard">Dashboard</Link>
      <button onClick={() => router.push('/admin')}>Admin</button>
    </div>
  );
}
```

## ğŸ“ Ajouter de nouvelles traductions

### 1. Ajoutez les clÃ©s dans les fichiers JSON

**src/i18n/messages/fr.json**
```json
{
  "myNewSection": {
    "title": "Mon titre",
    "description": "Ma description"
  }
}
```

**src/i18n/messages/en.json**
```json
{
  "myNewSection": {
    "title": "My title",
    "description": "My description"
  }
}
```

### 2. Utilisez-les dans vos composants

```tsx
import { useTranslations } from 'next-intl';

export function MyComponent() {
  const t = useTranslations('myNewSection');
  
  return (
    <div>
      <h1>{t('title')}</h1>
      <p>{t('description')}</p>
    </div>
  );
}
```

## ğŸ¨ EntitÃ©s disponibles

Les entitÃ©s suivantes sont traduites dans `entities.*` :

- `diploma` - DiplÃ´me
- `division` - FiliÃ¨re
- `examinationCenter` - Centre d'examen
- `grade` - Niveau scolaire
- `subject` - MatiÃ¨re
- `topic` - ThÃ¨me
- `user` - Utilisateur

Chaque entitÃ© a :
- `singular` / `plural`
- `article.definite` / `article.indefinite`
- `actions.add` / `actions.edit` / `actions.delete` / `actions.view` / `actions.list`

## ğŸ” URLs et SEO

next-intl gÃ¨re automatiquement les URLs localisÃ©es :

- **FranÃ§ais (dÃ©faut)** : `/dashboard`, `/admin/diplomas`
- **Anglais** : `/en/dashboard`, `/en/admin/diplomas`

La locale par dÃ©faut (franÃ§ais) n'ajoute pas de prÃ©fixe dans l'URL grÃ¢ce Ã  `localePrefix: 'as-needed'`.

## ğŸš€ Bonnes pratiques

1. **Toujours utiliser les hooks** plutÃ´t que d'accÃ©der directement aux messages
2. **Grouper les traductions** par contexte (common, auth, navigation, etc.)
3. **Ã‰viter les hardcoded strings** dans l'UI - toujours passer par i18n
4. **Tester les deux langues** lors du dÃ©veloppement de nouvelles fonctionnalitÃ©s
5. **Utiliser des clÃ©s descriptives** plutÃ´t que des raccourcis

## ğŸ› ï¸ Configuration technique

### Middleware

Le middleware intercepte toutes les requÃªtes et gÃ¨re automatiquement :
- DÃ©tection de la locale
- Redirection vers la bonne URL localisÃ©e
- Gestion des cookies de prÃ©fÃ©rence

### next.config.mjs

Le plugin next-intl est configurÃ© pour charger les messages au build :

```js
import createNextIntlPlugin from 'next-intl/plugin';
const withNextIntl = createNextIntlPlugin('./src/i18n/request.ts');

export default withNextIntl(nextConfig);
```

## ğŸ“š Ressources

- [Documentation next-intl](https://next-intl-docs.vercel.app/)
- [Next.js i18n routing](https://nextjs.org/docs/app/building-your-application/routing/internationalization)
