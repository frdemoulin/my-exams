/* Font principale (Flowbite utilise aussi Inter) */
@import url("https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap");

@import "tailwindcss";

/* Évite les boucles de recompilation côté public en mode watch */
@source not "../../public";

/* Thème Flowbite 4 (choisis-en un : default / minimal / enterprise) */
@import "flowbite/src/themes/default";

/* CSS Flowbite (composants, dont Datepicker de flowbite-react) */
@import "flowbite/dist/flowbite.min.css";

/* Intégration Flowbite pour Tailwind v4 */
@plugin "flowbite/plugin";
@source "../../node_modules/flowbite";

/* Variante dark basée sur la classe .dark portée par <html> ou <body> */
@custom-variant dark (&:where(.dark, .dark *));

/* =========================
   Thème (tokens Tailwind v4)
   ========================= */

@theme {
  /* Police */
  --font-sans: "Inter", system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI",
    sans-serif;

  /* Tokens OKLCH pour ton design system */
  --color-background: oklch(0.985 0.003 250);
  --color-foreground: oklch(0.22 0.03 250);

  --color-muted: oklch(0.96 0.01 250);
  --color-muted-foreground: oklch(0.45 0.02 250);

  --color-border: oklch(0.92 0.01 250);
  --color-input: var(--color-background);

  --color-primary: oklch(0.65 0.14 255);
  --color-primary-foreground: oklch(0.99 0.01 255);

  --color-destructive: oklch(0.58 0.17 27);
  --color-destructive-foreground: oklch(0.99 0.02 95);

  --color-card: var(--color-background);
  --color-card-foreground: var(--color-foreground);

  /* Rayons & ombres (réutilisables en classes via Tailwind) */
  --radius-xs: 0.25rem;
  --radius-sm: 0.375rem;
  --radius-md: 0.5rem;
  --radius-lg: 0.75rem;
  --radius-xl: 1rem;

  --shadow-soft: 0 10px 25px rgba(15, 23, 42, 0.06);
}

/* Harmonise Flowbite avec nos tokens sans devoir réappliquer des classes utilitaires */
:root {
  --color-body: var(--color-foreground);
  --color-heading: var(--color-foreground);
  --color-neutral-primary: var(--color-card);
  --color-neutral-primary-soft: var(--color-card);
  --color-neutral-secondary: var(--color-muted);
  --color-neutral-secondary-soft: var(--color-muted);
  --color-default: var(--color-border);
  --color-default-subtle: var(--color-border);
}

/* Overrides dark mode des tokens (utilisés par bg-background, text-foreground, etc.) */
.dark {
  --color-background: oklch(0.17 0.03 250);
  --color-foreground: oklch(0.96 0.01 250);

  --color-muted: oklch(0.22 0.02 250);
  --color-muted-foreground: oklch(0.76 0.03 250);

  --color-border: oklch(0.28 0.02 250);
  --color-input: oklch(0.18 0.03 250);

  --color-card: oklch(0.18 0.03 250);
  --color-card-foreground: var(--color-foreground);

  --color-primary: oklch(0.72 0.13 255);
  --color-primary-foreground: oklch(0.12 0.02 255);

  --color-body: var(--color-foreground);
  --color-heading: var(--color-foreground);
  --color-neutral-primary: var(--color-card);
  --color-neutral-primary-soft: var(--color-card);
  --color-neutral-secondary: var(--color-muted);
  --color-neutral-secondary-soft: var(--color-muted);
  --color-default: var(--color-border);
  --color-default-subtle: var(--color-border);
}

/* ==========
   Base layer
   ========== */

@layer base {
  :root {
    color-scheme: light;
    font-family: var(--font-sans);
  }

  .dark {
    color-scheme: dark;
  }

  *,
  *::before,
  *::after {
    @apply border-border;
  }

  body {
    @apply bg-background text-foreground antialiased;
    min-height: 100vh;
  }

  a[href] {
    cursor: pointer;
  }

  /* Lien actif dans ta navbar / menu */
  .active {
    @apply text-fg-brand hover:!text-heading border-b-2 border-brand hover:border-brand;
  }

  /* Inputs “génériques” : fond lié à ton token d’input */
  input[type="text"],
  input[type="email"],
  input[type="password"],
  input[type="search"],
  textarea {
    background-color: var(--color-input);
  }

  select[data-native] {
    background-color: var(--color-input);
  }

  /* Supprime les flèches sur les inputs number (UX plus propre) */
  input[type="number"]::-webkit-outer-spin-button,
  input[type="number"]::-webkit-inner-spin-button {
    -webkit-appearance: none;
    margin: 0;
  }

  input[type="number"] {
    -moz-appearance: textfield;
  }
}

/* ===============
   Components layer
   =============== */

@layer components {
  /* Badges pills (par ex. pour les tags de sujets) */
  .badge-pill {
    inline-flex: inline-flex;
    align-items: center;
    border-radius: 9999px;
    padding: 0.25rem 0.75rem;
    font-size: 0.75rem;
    line-height: 1rem;
    font-weight: 500;
  }

  .badge-pill-muted {
    inline-flex: inline-flex;
    align-items: center;
    border-radius: 9999px;
    padding: 0.25rem 0.75rem;
    font-size: 0.75rem;
    line-height: 1rem;
    font-weight: 500;
    background-color: var(--color-muted);
    color: var(--color-muted-foreground);
  }
}

/* ============
   Utilities (optionnel, si tu veux des utilitaires custom)
   ============ */
/*
@layer utilities {
  .shadow-soft {
    box-shadow: var(--shadow-soft);
  }
}
*/
